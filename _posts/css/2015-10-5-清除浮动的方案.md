---
layout: post
category: "css"
---

# 清除浮动的方案

读者自行准备编辑器浏览器测试示例代码。

## 浮动是什么，为什么要清除它？

为什么会有浮动？浮动（float）这个属性出现的历史原因是为了**实现文字环绕效果**。


    <!DOCTYPE html>
    <html>
    <head>
        <title>method 1</title>
        <meta charset="utf-8"/>
        <style>
            .content{
                width: 400px;
            }
            img{
                float: left;
            }
        </style>
    </head>
        <img src="https://mmbiz.qlogo.cn/mmbiz/hlDY4lUia8HJTFXP1RhzPkF0UpFLka0rjbq6qqoxEjGpdJwGmeVcBRWdtd5UDeIiaoXoApicNMeavzOhbMEQYBDzg/0?wx_fmt=jpeg"
         alt=""/>
        <div class="content">我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人我们是共产主义接班人</div>
    </html>
    


为什么要清除float？以往多列布局普遍使用table方式，慢慢的人们发现float很好用，但是要注意一些问题（因为原本就不是为了布局设计的属性）。

## 浮动在布局过程中会有什么问题？

浮动的元素脱离文档流，导致父元素塌陷（土话来讲：因为是脱离，所以父元素以为内部没有东西，就塌陷了）。这就是所谓float的破坏性。清除浮动便是对抗这种破坏性。塌陷就像下面代码所示，可以注意到**父元素并没有被子元素撑起来**。

    <!DOCTYPE html>
    <html>
    <head>
        <title>method 1</title>
        <meta charset="utf-8"/>
        <style>
            .wrapper{
                padding: 10px;
                background: #cccccc;
            }
            .content{
                height: 100px;
                width: 100px;
                background: #999;
                float: left;
            }
        </style>
    </head>
        <div class="wrapper">
            <div class="content"></div>
        </div>
    </html>

如果我们通过**某些方法消除浮动对父元素的影响**，这便是清除浮动。

## 怎么清除浮动呢？

网上总结了很多方案，实际上就分为两大类。还有类似定死父元素高度，使用javascript这类方案不建议使用。

### method 1：clear属性

这个属性我理解蛮久的，最后我这样说服自己：**clear帮助该元素消除文档流上游的浮动元素对其位置的影响**。clear属性让该元素以为上流的浮动元素还在文档流中，所以它按照正常文档流的约束移动自己的位置，让整个布局看起来不受浮动的影响。父元素要包裹文档流中的元素，所以顺带包裹了之前的浮动元素。

使用方法，clear可以取三个值left，right，both。分别是清楚左浮动，右浮动，左&右浮动。一般使用clear：both。

使用clear有两种方式，使用父元素的after伪元素，或者末尾加上一个空的div，给他们的display属性设置为block，clear设置为both。如下。

    
    <!DOCTYPE html>
    <html>
    <head>
        <title>float</title>
        <meta charset="utf-8"/>
        <style>
            .wrapper{
                padding: 10px;
                background: #cccccc;
            }
            .wrapper::after{
                content: "";
                display: block;
                clear:both;
            }
            .content{
                height: 100px;
                width: 100px;
                background: #999;
                float: left;
            }
        </style>
    </head>
        <div class="wrapper">
            <div class="content"></div>
            <!--<div style="clear: both;"></div>-->
        </div>
    </html>

### method 2：使用BFC

当一个父元素满足一定条件的时候，就形成了BFC，BFC其中的一个特性：计算BFC的高度时，浮动元素也参与计算。实际上就是清理浮动的意思。

#### 贴一些BFC的事

关于BFC我也看过一些东西，感觉并不太好驾驭，先贴一点概念性的内容。

就像overflow!=visible满足生成BFC条件，所以这个context符合BFC布局规则，**计算BFC的高度时，浮动元素也参与计算。**也就是说能产生BFC的条件就能清理浮动。所以下面最后一个列表都可以。

**BFC 定义**

BFC(Block formatting context)直译为"块级格式化上下文"。它是一个独立的渲染区域，只有Block-level box参与， 它规定了内部的Block-level Box如何布局，并且与这个区域外部毫不相干。

**BFC布局规则：**

- 内部的Box会在垂直方向，一个接一个地放置。
- Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠。
- 每个元素的margin box的左边， 与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。
- BFC的区域不会与float box重叠。
- BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。
- 计算BFC的高度时，浮动元素也参与计算

**哪些元素会产生bfc？**

- 根元素
- float属性不为none
- position为absolute或fixed
- display为inline-block, table-cell, table-caption, flex, inline-flex
- overflow不为visible

例：使用overflow!=visible清理浮动

    <!DOCTYPE html>
    <html>
    <head>
        <title>float</title>
        <meta charset="utf-8"/>
        <style>
            .wrapper{
                padding: 10px;
                background: #cccccc;
                overflow: auto;
            }
            .content{
                height: 100px;
                width: 100px;
                background: #999;
                float: left;
            }
        </style>
    </head>
        <div class="wrapper">
            <div class="content"></div>
        </div>
    </html>